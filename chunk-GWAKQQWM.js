import{a as N}from"./chunk-4JKD2TZL.js";import{c as A}from"./chunk-R2BWZGB6.js";import"./chunk-SGYCFQGT.js";import"./chunk-LTCMITUI.js";import{a as D}from"./chunk-OGBFUU3Y.js";import{a as U}from"./chunk-ENSHKNHY.js";import"./chunk-F6IFWQ6I.js";import"./chunk-PUI4IBEA.js";import"./chunk-J6MKEWI4.js";import{a as L}from"./chunk-MEC76M2Q.js";import"./chunk-IWXTRJGV.js";import{Cb as F,Da as b,Gb as B,Ha as g,Ia as k,Ja as I,Ka as E,La as n,Ma as o,Na as x,Oa as M,P as v,Qa as h,Ra as l,Rb as V,T as _,U as f,Xb as R,Yb as $,bb as m,cb as c,e as q,jb as S,la as r,lb as p,mb as d,pa as w,ta as y,za as T}from"./chunk-FKC2K5KC.js";var C=q(L());var P=()=>({color:"#1f516f"}),O=()=>({color:"#e15639"});function z(t,e){if(t&1){let i=M();n(0,"button",6),h("click",function(){_(i);let s=l();return f(s.createTeam())}),m(1),p(2,"translate"),o()}t&2&&(r(),c(d(2,1,"teamManager.create")))}function G(t,e){t&1&&(n(0,"th",5),m(1,"User"),o())}function H(t,e){if(t&1&&(n(0,"td"),m(1),o()),t&2){let i=l().$implicit;r(),c(i.user_id)}}function J(t,e){if(t&1){let i=M();n(0,"a",9),h("click",function(){_(i);let s=l().$implicit,u=l();return f(u.viewTeam(s))}),x(1,"i",10),o()}t&2&&b("ngStyle",S(1,P))}function K(t,e){if(t&1){let i=M();n(0,"a",9),h("click",function(){_(i);let s=l().$implicit,u=l();return f(u.editTeam(s))}),x(1,"i",11),o(),n(2,"a",9),h("click",function(){_(i);let s=l().$implicit,u=l();return f(u.deleteTeam(s))}),x(3,"i",12),o()}t&2&&(b("ngStyle",S(2,P)),r(2),b("ngStyle",S(3,O)))}function Q(t,e){if(t&1&&(n(0,"tr"),T(1,H,2,1,"td"),n(2,"td"),m(3),o(),n(4,"td"),m(5),o(),n(6,"td",7),T(7,J,2,2,"a",8)(8,K,4,4),o()()),t&2){let i=e.$implicit,a=l();r(),g(a.userRole==2?1:-1),r(2),c(i.name),r(2),c(i.description),r(2),g(a.userRole==2?7:8)}}function W(t,e){t&1&&(n(0,"tr")(1,"td",13),m(2),p(3,"translate"),o()()),t&2&&(r(2),c(d(3,1,"teamManager.noTeams")))}var j=class t{constructor(e){this.dialog=e}aTeams=[];userId;userRole;router=v(V);serviceTeams=v(D);serviceAuth=v(U);ngOnInit(){console.log("teamManager is logged",this.serviceAuth.isLoggedIn()),this.serviceAuth.getUserIdFromToken()!=null&&(this.userId=this.serviceAuth.getUserIdFromToken(),this.userRole=this.serviceAuth.getRoleFromToken()),this.userRole==2?this.showAllTeams():this.showTeamsUser()}showAllTeams(){this.serviceTeams.getTeams().subscribe({next:e=>{this.aTeams=e},error:e=>{console.log(e)}})}showTeamsUser(){this.serviceTeams.getTeamsUser(this.userId).subscribe({next:e=>{this.aTeams=e,console.log(this.aTeams)},error:e=>{console.log(e)}})}createTeam(){this.dialog.open(N).afterClosed().subscribe(i=>{if(i){let a={id:void 0,name:i.name,description:i.description,user_id:this.userId,pokemon_1:void 0,pokemon_2:void 0,pokemon_3:void 0,pokemon_4:void 0,pokemon_5:void 0,pokemon_6:void 0};console.log(a),this.serviceTeams.postPokemonTeam(a).subscribe({next:s=>{C.default.fire("El equipo ha sido a\xF1adido","","success"),this.showTeamsUser()},error:s=>{console.log(s)}})}})}editTeam(e){this.router.navigateByUrl(`/teamBuilder/${e.user_id}/${e.id}`)}viewTeam(e){this.router.navigateByUrl(`/teamViewer/${e.id}`)}deleteTeam(e){C.default.fire({title:`\xBFDo you wish to delete the team ${e.name}?`,showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel"}).then(i=>{i.isConfirmed&&this.serviceTeams.deleteTeam(e.id).subscribe({next:a=>{C.default.fire(`${a.message}`,"","success"),this.showTeamsUser()},error:a=>{C.default.fire(`${a.message}`,"","error")}})})}static \u0275fac=function(i){return new(i||t)(w(A))};static \u0275cmp=y({type:t,selectors:[["app-team-manager"]],decls:24,vars:12,consts:[[1,"row"],[1,"col-12","text-center","mt-3","d-flex","justify-content-between"],[1,"btn","btn-success"],[1,"col-12"],[1,"table","text-center","table-light","my-2"],["scope","col"],[1,"btn","btn-success",3,"click"],[1,""],[1,"pointer","m-2",3,"ngStyle"],[1,"pointer","m-2",3,"click","ngStyle"],[1,"fa-solid","fa-magnifying-glass"],[1,"fa-solid","fa-pen-to-square"],[1,"fa-solid","fa-trash"],["colspan","3",1,"text-center"]],template:function(i,a){i&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),m(3,"Team Manager"),o(),T(4,z,3,3,"button",2),o()(),x(5,"hr"),n(6,"div",0)(7,"div",3)(8,"table",4)(9,"thead"),T(10,G,2,0,"th",5),n(11,"th",5),m(12),p(13,"translate"),o(),n(14,"th",5),m(15),p(16,"translate"),o(),n(17,"th",5),m(18),p(19,"translate"),o()(),n(20,"tbody"),I(21,Q,9,4,"tr",null,k,!1,W,4,3,"tr"),o()()()()),i&2&&(r(4),g(a.userRole!=2?4:-1),r(6),g(a.userRole==2?10:-1),r(2),c(d(13,6,"teamManager.name")),r(3),c(d(16,8,"teamManager.description")),r(3),c(d(19,10,"teamManager.actions")),r(3),E(a.aTeams))},dependencies:[B,F,$,R],encapsulation:2})};export{j as TeamManagerComponent};
