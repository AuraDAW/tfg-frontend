import{a as H}from"./chunk-VNIT7SN5.js";import{a as L,c as U,d as z}from"./chunk-LOGXL3IP.js";import{a as j}from"./chunk-2DCUL4N3.js";import{a as R}from"./chunk-A6I5M2ZJ.js";import{a as O}from"./chunk-TXDXGVCW.js";import"./chunk-LTCMITUI.js";import{a as $,d as w,e as V,i as q}from"./chunk-PUI4IBEA.js";import"./chunk-J6MKEWI4.js";import{a as X,e as M,g as D,h as F,j as _,l as B,m as T,s as E,t as N,u as G}from"./chunk-MEC76M2Q.js";import"./chunk-3CD6P3UR.js";import{Da as b,Fb as I,Gb as x,Ia as u,Ja as f,Ka as k,La as o,Ma as r,Na as h,P as v,Qa as P,Rb as C,Xb as y,Yb as S,bb as l,cb as p,e as W,la as t,lb as n,mb as m,ta as g}from"./chunk-FKC2K5KC.js";var K=W(X());function Y(s,e){if(s&1&&(o(0,"mat-option",5),l(1),n(2,"translate"),n(3,"titlecase"),r()),s&2){let i=e.$implicit;b("value",i.id),t(),p(m(3,4,m(2,2,`pokemonData.name.${i.id}`)))}}function Z(s,e){if(s&1&&(o(0,"mat-option",5),l(1),n(2,"translate"),n(3,"titlecase"),r()),s&2){let i=e.$implicit;b("value",i.id),t(),p(m(3,4,m(2,2,`abilities.name.${i.id}`)))}}function ee(s,e){if(s&1&&(o(0,"mat-option",5),l(1),n(2,"translate"),n(3,"titlecase"),r()),s&2){let i=e.$implicit;b("value",i.id),t(),p(m(3,4,m(2,2,`moves.name.${i.id}`)))}}var J=class s{frm;aPokemonData=[];aMoves=[];aAbilities=[];servicePokemonData=v(j);serviceMoves=v(R);serviceAbilities=v(O);router=v(C);fb=v(E);ngOnInit(){this.validacionesFrm(),this.loadData(),this.frm.get("pokemonId").valueChanges.subscribe(e=>{this.selectExistingMovesAbilities(e)})}validacionesFrm(){this.frm=this.fb.group({pokemonId:["",[M.required]],abilities:["",[M.required]],moves:["",[M.required]]})}loadData(){this.servicePokemonData.getPokemonData().subscribe({next:e=>{this.aPokemonData=e},error:e=>{console.log(e)}}),this.serviceAbilities.getAbilities().subscribe({next:e=>{this.aAbilities=e},error:e=>{console.log(e)}}),this.serviceMoves.getMoves().subscribe({next:e=>{this.aMoves=e},error:e=>{console.log(e)}})}savePokemon(){let e=this.frm.get("pokemonId")?.value,i=this.frm.get("abilities")?.value,a=this.frm.get("moves")?.value,d=i.map(c=>({pokemonId:e,abilityId:c})),Q=a.map(c=>({pokemonId:e,moveId:c}));this.servicePokemonData.addAbilitiesToPokemon(d).subscribe({next:c=>{this.servicePokemonData.addMovesToPokemon(Q).subscribe({next:A=>{K.default.fire("The moves and abilities have been added to the pokemon","","success"),this.frm.reset(),this.router.navigateByUrl("/adminPanel")},error:A=>{console.log(A)}})},error:c=>{console.log(c)}})}selectExistingMovesAbilities(e){this.serviceAbilities.getPokemonAbilities(e).subscribe({next:i=>{let a=i.map(d=>d.id);this.frm.get("abilities")?.setValue(a)},error:i=>{console.log(i)}}),this.serviceMoves.getPokemonMoves(e).subscribe({next:i=>{let a=i.map(d=>d.id);this.frm.get("moves")?.setValue(a)},error:i=>{console.log(i)}})}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=g({type:s,selectors:[["app-add-abilities-moves-pokemon"]],decls:32,vars:17,consts:[["autocomplete","off",3,"submit","formGroup"],[1,"row"],[1,"col-12","text-center","mt-3","d-flex","justify-content-between"],["type","submit",1,"btn","btn-success",3,"disabled"],["formControlName","pokemonId"],[3,"value"],["formControlName","abilities","multiple",""],["formControlName","moves","multiple",""]],template:function(i,a){i&1&&(o(0,"form",0),P("submit",function(){return a.savePokemon()}),o(1,"div",1)(2,"div",2)(3,"h2"),l(4),n(5,"translate"),r(),o(6,"button",3),l(7),n(8,"translate"),r()()(),h(9,"hr"),o(10,"div",1)(11,"mat-form-field")(12,"mat-label"),l(13),n(14,"translate"),r(),o(15,"mat-select",4),f(16,Y,4,6,"mat-option",5,u),r()(),o(18,"mat-form-field")(19,"mat-label"),l(20),n(21,"translate"),r(),o(22,"mat-select",6),f(23,Z,4,6,"mat-option",5,u),r()(),o(25,"mat-form-field")(26,"mat-label"),l(27),n(28,"translate"),r(),o(29,"mat-select",7),f(30,ee,4,6,"mat-option",5,u),r()()()()),i&2&&(b("formGroup",a.frm),t(4),p(m(5,7,"pokemonAdd.title")),t(2),b("disabled",a.frm.invalid),t(),p(m(8,9,"button.save")),t(6),p(m(14,11,"pokemonAdd.pokemon")),t(3),k(a.aPokemonData),t(4),p(m(21,13,"pokemonAdd.abilities")),t(3),k(a.aAbilities),t(4),p(m(28,15,"pokemonAdd.moves")),t(3),k(a.aMoves))},dependencies:[x,I,G,_,D,F,B,T,N,S,y,V,w,$,q,z,U,L,H],encapsulation:2})};export{J as AddAbilitiesMovesPokemonComponent};
