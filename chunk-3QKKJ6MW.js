import{d as P}from"./chunk-LOGXL3IP.js";import{a as w}from"./chunk-DOSSN5ZZ.js";import"./chunk-LTCMITUI.js";import{a as V,d as G,e as D,h as R,i as q}from"./chunk-PUI4IBEA.js";import"./chunk-J6MKEWI4.js";import{a as L,c as M,e as d,g as C,h as I,j as E,l as F,m as S,s as N,t as B,u as T}from"./chunk-MEC76M2Q.js";import"./chunk-IWXTRJGV.js";import{Da as c,Gb as h,La as r,Ma as i,Na as s,P as p,Pb as A,Qa as y,Rb as _,Xb as g,Yb as x,bb as a,cb as o,e as j,la as n,lb as m,mb as l,ta as v}from"./chunk-FKC2K5KC.js";var f=j(L());var U=class b{frm;id;activateRoute=p(A);router=p(_);serviceAbilities=p(w);fb=p(N);ngOnInit(){this.validacionesFrm(),this.loadUpdate()}validacionesFrm(){this.frm=this.fb.group({name_en:["",[d.required]],name_es:["",[d.required]],description_en:["",[d.required]],description_es:["",[d.required]]})}loadUpdate(){this.activateRoute.paramMap.subscribe(e=>{this.id=parseInt(e.get("id"))}),this.id&&this.serviceAbilities.getAbility(this.id).subscribe({next:e=>{console.log(e),this.frm.get("name_en")?.setValue(e[0].name_en),this.frm.get("name_es")?.setValue(e[0].name_es),this.frm.get("description_en")?.setValue(e[0].description_en),this.frm.get("description_es")?.setValue(e[0].description_es)},error:e=>{console.log(e)}})}saveAbility(){let e={id:this.id,name_en:this.frm.get("name_en")?.value,name_es:this.frm.get("name_es")?.value,description_en:this.frm.get("description_en")?.value,description_es:this.frm.get("description_es")?.value};console.log(e),this.id?this.updateAbility(e):this.addAbility(e)}addAbility(e){this.serviceAbilities.postAbility(e).subscribe({next:t=>{f.default.fire("The ability has been created","","success"),this.frm.reset(),this.router.navigateByUrl("/adminPanel")},error:t=>{console.log(t)}})}updateAbility(e){this.serviceAbilities.updateAbility(e).subscribe({next:t=>{f.default.fire("The ability has been updated","","success"),this.frm.reset(),this.router.navigateByUrl("/adminPanel")},error:t=>{console.log(t)}})}static \u0275fac=function(t){return new(t||b)};static \u0275cmp=v({type:b,selectors:[["app-admin-ability"]],decls:31,vars:20,consts:[["autocomplete","off",3,"submit","formGroup"],[1,"row"],[1,"col-12","text-center","mt-3","d-flex","justify-content-between"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"col-12"],["matInput","","formControlName","name_en"],["matInput","","formControlName","name_es"],["matInput","","formControlName","description_en"],["matInput","","formControlName","description_es"]],template:function(t,u){t&1&&(r(0,"form",0),y("submit",function(){return u.saveAbility()}),r(1,"div",1)(2,"div",2)(3,"h2"),a(4),m(5,"translate"),i(),r(6,"button",3),a(7),m(8,"translate"),i()()(),s(9,"hr"),r(10,"div",1)(11,"mat-form-field",4)(12,"mat-label"),a(13),m(14,"translate"),i(),s(15,"input",5),i(),r(16,"mat-form-field",4)(17,"mat-label"),a(18),m(19,"translate"),i(),s(20,"input",6),i(),r(21,"mat-form-field",4)(22,"mat-label"),a(23),m(24,"translate"),i(),s(25,"input",7),i(),r(26,"mat-form-field",4)(27,"mat-label"),a(28),m(29,"translate"),i(),s(30,"input",8),i()()()),t&2&&(c("formGroup",u.frm),n(4),o(l(5,8,"adminAbility.title")),n(2),c("disabled",u.frm.invalid),n(),o(l(8,10,"button.save")),n(6),o(l(14,12,"adminAbility.nameEN")),n(5),o(l(19,14,"adminAbility.nameES")),n(5),o(l(24,16,"adminAbility.descriptionEN")),n(5),o(l(29,18,"adminAbility.descriptionES")))},dependencies:[h,T,E,M,C,I,F,S,B,x,g,D,G,V,q,R,P],encapsulation:2})};export{U as AdminAbilityComponent};
