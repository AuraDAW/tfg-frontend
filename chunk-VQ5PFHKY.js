import{a as Q}from"./chunk-VNIT7SN5.js";import{a as O,c as z,d as J}from"./chunk-LOGXL3IP.js";import{a as K}from"./chunk-7DJ5TZZF.js";import{a as L}from"./chunk-LLZLNGRP.js";import"./chunk-LTCMITUI.js";import{a as w,d as R,e as U,h as $,i as H}from"./chunk-PUI4IBEA.js";import"./chunk-J6MKEWI4.js";import{a as Y,c as F,e as s,g as B,h as M,j as N,k as D,l as A,m as V,s as q,t as j,u as G}from"./chunk-MEC76M2Q.js";import"./chunk-IWXTRJGV.js";import{Da as _,Fb as S,Gb as I,Ia as h,Ja as v,Ka as k,La as n,Ma as t,Na as d,P as g,Pb as x,Qa as b,Rb as E,Xb as C,Yb as T,bb as r,cb as l,e as X,la as m,lb as o,mb as p,ta as P}from"./chunk-FKC2K5KC.js";var y=X(Y());function Z(f,e){if(f&1&&(n(0,"mat-option",10),r(1),o(2,"translate"),o(3,"titlecase"),t()),f&2){let a=e.$implicit;_("value",a.id),m(),l(p(3,4,p(2,2,`types.name.${a.id}`)))}}function ee(f,e){if(f&1&&(n(0,"mat-option",10),r(1),o(2,"translate"),o(3,"titlecase"),t()),f&2){let a=e.$implicit;_("value",a.id),m(),l(p(3,4,p(2,2,`types.name.${a.id}`)))}}var W=class f{frm;aTypes=[];fileName="";id;activateRoute=g(x);router=g(E);serviceTypes=g(K);servicePokemonData=g(L);fb=g(q);ngOnInit(){this.validacionesFrm(),this.loadTypes(),this.loadUpdate()}validacionesFrm(){this.frm=this.fb.group({id:[""],name_en:["",[s.required]],name_es:["",[s.required]],pokedex_id:["",[s.required]],type_1:["",[s.required]],type_2:[""],base_hp:["",[s.required]],base_atk:["",[s.required]],base_def:["",[s.required]],base_spatk:["",[s.required]],base_spdef:["",[s.required]],base_spd:["",[s.required]],image:[null,[s.required]],imageShiny:[null,[s.required]]})}loadUpdate(){this.activateRoute.paramMap.subscribe(e=>{this.id=parseInt(e.get("id"))}),this.id&&this.servicePokemonData.getPokemonDataId(this.id).subscribe({next:e=>{console.log(e),this.frm.get("id")?.setValue(this.id),this.frm.get("name_en")?.setValue(e[0].name_en),this.frm.get("name_es")?.setValue(e[0].name_es),this.frm.get("pokedex_id")?.setValue(e[0].pokedex_id),this.frm.get("type_1")?.setValue(e[0].type),this.frm.get("type_2")?.setValue(e[0].type_2),this.frm.get("base_hp")?.setValue(e[0].base_hp),this.frm.get("base_atk")?.setValue(e[0].base_atk),this.frm.get("base_def")?.setValue(e[0].base_def),this.frm.get("base_spatk")?.setValue(e[0].base_spatk),this.frm.get("base_spdef")?.setValue(e[0].base_spdef),this.frm.get("base_spd")?.setValue(e[0].base_spd)},error:e=>{console.log(e)}})}loadTypes(){this.serviceTypes.getTypes().subscribe({next:e=>{this.aTypes=e},error:e=>{console.log(e)}})}onFileChange(e,a){let i=e.target;if(i?.files?.length){let u=i.files[0];console.log(u),this.frm.patchValue({[a]:u}),this.frm.get(a)?.markAsTouched()}}triggerFileInput(e){document.getElementById(e)?.click()}savePokemon(){let e=this.frm.get("type_1")?.value,a=this.frm.get("type_2")?.value;(!a||a===e)&&(a=null);let i=new FormData;i.append("id",this.frm.get("id")?.value),i.append("pokedex_id",this.frm.get("pokedex_id")?.value),i.append("name_en",this.frm.get("name_en")?.value),i.append("name_es",this.frm.get("name_es")?.value),i.append("type",e),i.append("type_2",a),i.append("base_atk",this.frm.get("base_atk")?.value),i.append("base_def",this.frm.get("base_def")?.value),i.append("base_spatk",this.frm.get("base_spatk")?.value),i.append("base_spdef",this.frm.get("base_spdef")?.value),i.append("base_spd",this.frm.get("base_spd")?.value),i.append("base_hp",this.frm.get("base_hp")?.value),i.append("image",this.frm.get("image")?.value),i.append("image_shiny",this.frm.get("imageShiny")?.value),console.log(i),this.id?this.updatePokemon(i):this.addPokemon(i)}addPokemon(e){this.servicePokemonData.postPokemonData(e).subscribe({next:a=>{y.default.fire("The pokemon has been added","","success"),this.frm.reset(),this.router.navigateByUrl("/adminPanel")},error:a=>{console.log(a)}})}updatePokemon(e){this.servicePokemonData.updatePokemonData(e).subscribe({next:a=>{y.default.fire("The pokemon has been updated","","success"),this.frm.reset(),this.router.navigateByUrl("/adminPanel")},error:a=>{console.log(a)}})}static \u0275fac=function(a){return new(a||f)};static \u0275cmp=P({type:f,selectors:[["app-admin-pokemon"]],decls:83,vars:49,consts:[["autocomplete","off",3,"submit","formGroup"],[1,"row"],[1,"col-12","text-center","mt-3","d-flex","justify-content-between"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","hidden","formControlName","id","value",""],[1,"col-12"],["matInput","","formControlName","name_en"],["matInput","","formControlName","name_es"],["type","number","matInput","","formControlName","pokedex_id"],["formControlName","type_1"],[3,"value"],["formControlName","type_2"],["type","number","matInput","","formControlName","base_hp"],["type","number","matInput","","formControlName","base_atk"],["type","number","matInput","","formControlName","base_def"],["type","number","matInput","","formControlName","base_spatk"],["type","number","matInput","","formControlName","base_spdef"],["matInput","","formControlName","base_spd"],["for","image"],["matInput","","readonly","","placeholder","Choose image",3,"click","value"],["type","file","id","image","accept",".jpg,.jpeg,.png",2,"display","none",3,"change"],["for","imageShiny"],["matInput","","readonly","","placeholder","Choose shiny image",3,"click","value"],["type","file","id","imageShiny","accept",".jpg,.jpeg,.png",2,"display","none",3,"change"]],template:function(a,i){if(a&1&&(n(0,"form",0),b("submit",function(){return i.savePokemon()}),n(1,"div",1)(2,"div",2)(3,"h2"),r(4),o(5,"translate"),t(),n(6,"button",3),r(7),o(8,"translate"),t()()(),d(9,"hr"),n(10,"div",1),d(11,"input",4),n(12,"mat-form-field",5)(13,"mat-label"),r(14),o(15,"translate"),t(),d(16,"input",6),t(),n(17,"mat-form-field",5)(18,"mat-label"),r(19),o(20,"translate"),t(),d(21,"input",7),t(),n(22,"mat-form-field",5)(23,"mat-label"),r(24),o(25,"translate"),t(),d(26,"input",8),t(),n(27,"mat-form-field")(28,"mat-label"),r(29),o(30,"translate"),t(),n(31,"mat-select",9),v(32,Z,4,6,"mat-option",10,h),t()(),n(34,"mat-form-field")(35,"mat-label"),r(36),o(37,"translate"),t(),n(38,"mat-select",11),v(39,ee,4,6,"mat-option",10,h),t()(),n(41,"mat-form-field",5)(42,"mat-label"),r(43),o(44,"translate"),t(),d(45,"input",12),t(),n(46,"mat-form-field",5)(47,"mat-label"),r(48),o(49,"translate"),t(),d(50,"input",13),t(),n(51,"mat-form-field",5)(52,"mat-label"),r(53),o(54,"translate"),t(),d(55,"input",14),t(),n(56,"mat-form-field",5)(57,"mat-label"),r(58),o(59,"translate"),t(),d(60,"input",15),t(),n(61,"mat-form-field",5)(62,"mat-label"),r(63),o(64,"translate"),t(),d(65,"input",16),t(),n(66,"mat-form-field",5)(67,"mat-label"),r(68),o(69,"translate"),t(),d(70,"input",17),t(),n(71,"mat-form-field",5)(72,"mat-label",18),r(73),o(74,"translate"),t(),n(75,"input",19),b("click",function(){return i.triggerFileInput("image")}),t(),n(76,"input",20),b("change",function(c){return i.onFileChange(c,"image")}),t()(),n(77,"mat-form-field",5)(78,"mat-label",21),r(79),o(80,"translate"),t(),n(81,"input",22),b("click",function(){return i.triggerFileInput("imageShiny")}),t(),n(82,"input",23),b("change",function(c){return i.onFileChange(c,"imageShiny")}),t()()()()),a&2){let u,c;_("formGroup",i.frm),m(4),l(p(5,19,"adminPokemon.title")),m(2),_("disabled",i.frm.invalid),m(),l(p(8,21,"button.save")),m(7),l(p(15,23,"adminPokemon.nameEN")),m(5),l(p(20,25,"adminPokemon.nameES")),m(5),l(p(25,27,"adminPokemon.pokedex")),m(5),l(p(30,29,"adminPokemon.type1")),m(3),k(i.aTypes),m(4),l(p(37,31,"adminPokemon.type2")),m(3),k(i.aTypes),m(4),l(p(44,33,"adminPokemon.baseHP")),m(5),l(p(49,35,"adminPokemon.baseATK")),m(5),l(p(54,37,"adminPokemon.baseDEF")),m(5),l(p(59,39,"adminPokemon.baseSPATK")),m(5),l(p(64,41,"adminPokemon.baseSPDEF")),m(5),l(p(69,43,"adminPokemon.baseSPD")),m(5),l(p(74,45,"adminPokemon.image")),m(2),_("value",((u=i.frm.get("image"))==null||u.value==null?null:u.value.name)||""),m(4),l(p(80,47,"adminPokemon.imageShiny")),m(2),_("value",((c=i.frm.get("imageShiny"))==null||c.value==null?null:c.value.name)||"")}},dependencies:[I,S,G,N,F,D,B,M,A,V,j,T,C,U,R,w,H,$,J,z,O,Q],encapsulation:2})};export{W as AdminPokemonComponent};
