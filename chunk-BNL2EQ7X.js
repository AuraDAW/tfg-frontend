import{d as j}from"./chunk-LOGXL3IP.js";import{a as R}from"./chunk-TPB2NVBM.js";import"./chunk-LTCMITUI.js";import{a as D,d as G,e as k,h as q,i as w}from"./chunk-PUI4IBEA.js";import"./chunk-J6MKEWI4.js";import{a as H,c as S,e as u,g as M,h as y,j as x,l as N,m as T,s as B,t as A,u as V}from"./chunk-MEC76M2Q.js";import"./chunk-IWXTRJGV.js";import{Da as f,Gb as _,La as n,Ma as i,Na as d,P as c,Pb as b,Qa as g,Rb as E,Xb as F,Yb as C,bb as o,cb as l,e as L,la as a,lb as s,mb as p,ta as I}from"./chunk-FKC2K5KC.js";var v=L(H());var P=class h{frm;id;activateRoute=c(b);router=c(E);serviceItems=c(R);fb=c(B);ngOnInit(){this.validacionesFrm(),this.loadUpdate()}validacionesFrm(){this.frm=this.fb.group({id:[""],name_en:["",[u.required]],name_es:["",[u.required]],description_en:["",[u.required]],description_es:["",[u.required]],image:["",[u.required]]})}loadUpdate(){this.activateRoute.paramMap.subscribe(e=>{this.id=parseInt(e.get("id"))}),this.id&&this.serviceItems.getItem(this.id).subscribe({next:e=>{console.log(e),this.frm.get("id")?.setValue(this.id),this.frm.get("name_en")?.setValue(e[0].name_en),this.frm.get("name_es")?.setValue(e[0].name_es),this.frm.get("description_en")?.setValue(e[0].description_en),this.frm.get("description_es")?.setValue(e[0].description_es)},error:e=>{console.log(e)}})}onFileChange(e,t){let m=e.target;if(m?.files?.length){let r=m.files[0];console.log(r),this.frm.patchValue({[t]:r}),this.frm.get(t)?.markAsTouched()}}triggerFileInput(e){document.getElementById(e)?.click()}saveItem(){let e=new FormData;e.append("id",this.frm.get("id")?.value),e.append("name_en",this.frm.get("name_en")?.value),e.append("name_es",this.frm.get("name_es")?.value),e.append("description_en",this.frm.get("description_en")?.value),e.append("description_es",this.frm.get("description_es")?.value),e.append("image",this.frm.get("image")?.value),console.log(e),this.id?this.updateItem(e):this.addItem(e)}addItem(e){this.serviceItems.postItem(e).subscribe({next:t=>{v.default.fire("The item has been created","","success"),this.frm.reset(),this.router.navigateByUrl("/adminPanel")},error:t=>{console.log(t)}})}updateItem(e){this.serviceItems.updateItem(e).subscribe({next:t=>{v.default.fire("The item has been updated","","success"),this.frm.reset(),this.router.navigateByUrl("/adminPanel")},error:t=>{console.log(t)}})}static \u0275fac=function(t){return new(t||h)};static \u0275cmp=I({type:h,selectors:[["app-admin-item"]],decls:38,vars:24,consts:[["autocomplete","off",3,"submit","formGroup"],[1,"row"],[1,"col-12","text-center","mt-3","d-flex","justify-content-between"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","hidden","formControlName","id","value",""],[1,"col-12"],["matInput","","formControlName","name_en"],["matInput","","formControlName","name_es"],["matInput","","formControlName","description_en"],["matInput","","formControlName","description_es"],["for","image"],["matInput","","readonly","",3,"click","value"],["type","file","id","image","accept",".jpg,.jpeg,.png",2,"display","none",3,"change"]],template:function(t,m){if(t&1&&(n(0,"form",0),g("submit",function(){return m.saveItem()}),n(1,"div",1)(2,"div",2)(3,"h2"),o(4),s(5,"translate"),i(),n(6,"button",3),o(7),s(8,"translate"),i()()(),d(9,"hr"),n(10,"div",1),d(11,"input",4),n(12,"mat-form-field",5)(13,"mat-label"),o(14),s(15,"translate"),i(),d(16,"input",6),i(),n(17,"mat-form-field",5)(18,"mat-label"),o(19),s(20,"translate"),i(),d(21,"input",7),i(),n(22,"mat-form-field",5)(23,"mat-label"),o(24),s(25,"translate"),i(),d(26,"input",8),i(),n(27,"mat-form-field",5)(28,"mat-label"),o(29),s(30,"translate"),i(),d(31,"input",9),i(),n(32,"mat-form-field",5)(33,"mat-label",10),o(34),s(35,"translate"),i(),n(36,"input",11),g("click",function(){return m.triggerFileInput("image")}),i(),n(37,"input",12),g("change",function(U){return m.onFileChange(U,"image")}),i()()()()),t&2){let r;f("formGroup",m.frm),a(4),l(p(5,10,"adminItem.title")),a(2),f("disabled",m.frm.invalid),a(),l(p(8,12,"button.save")),a(7),l(p(15,14,"adminItem.nameEN")),a(5),l(p(20,16,"adminItem.nameES")),a(5),l(p(25,18,"adminItem.descriptionEN")),a(5),l(p(30,20,"adminItem.descriptionES")),a(5),l(p(35,22,"adminItem.image")),a(2),f("value",((r=m.frm.get("image"))==null||r.value==null?null:r.value.name)||"")}},dependencies:[_,V,x,S,M,y,N,T,A,C,F,k,G,D,w,q,j],encapsulation:2})};export{P as AdminItemComponent};
