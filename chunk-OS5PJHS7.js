import{a as J}from"./chunk-VNIT7SN5.js";import{a as U,c as z,d as H}from"./chunk-LOGXL3IP.js";import{a as O}from"./chunk-LLZLNGRP.js";import{a as L}from"./chunk-JTSZS4GU.js";import{a as R}from"./chunk-DOSSN5ZZ.js";import"./chunk-LTCMITUI.js";import{a as w,d as V,e as q,i as j}from"./chunk-PUI4IBEA.js";import"./chunk-J6MKEWI4.js";import{a as X,e as M,g as F,h as _,j as B,l as T,m as E,s as N,t as G,u as $}from"./chunk-MEC76M2Q.js";import"./chunk-IWXTRJGV.js";import{Da as b,Fb as x,Gb as C,Ia as u,Ja as f,Ka as k,La as o,Ma as n,Na as P,P as v,Qa as I,Rb as y,Xb as S,Yb as D,bb as l,cb as p,e as W,la as t,lb as r,mb as m,ta as h}from"./chunk-FKC2K5KC.js";var Q=W(X());function Y(s,e){if(s&1&&(o(0,"mat-option",5),l(1),r(2,"translate"),r(3,"titlecase"),n()),s&2){let i=e.$implicit;b("value",i.id),t(),p(m(3,4,m(2,2,`pokemonData.name.${i.id}`)))}}function Z(s,e){if(s&1&&(o(0,"mat-option",5),l(1),r(2,"translate"),r(3,"titlecase"),n()),s&2){let i=e.$implicit;b("value",i.id),t(),p(m(3,4,m(2,2,`abilities.name.${i.id}`)))}}function ee(s,e){if(s&1&&(o(0,"mat-option",5),l(1),r(2,"translate"),r(3,"titlecase"),n()),s&2){let i=e.$implicit;b("value",i.id),t(),p(m(3,4,m(2,2,`moves.name.${i.id}`)))}}var K=class s{frm;aPokemonData=[];aMoves=[];aAbilities=[];servicePokemonData=v(O);serviceMoves=v(L);serviceAbilities=v(R);router=v(y);fb=v(N);ngOnInit(){this.validacionesFrm(),this.loadData(),this.frm.get("pokemonId").valueChanges.subscribe(e=>{this.selectExistingMovesAbilities(e)})}validacionesFrm(){this.frm=this.fb.group({pokemonId:["",[M.required]],abilities:["",[M.required]],moves:["",[M.required]]})}loadData(){this.servicePokemonData.getPokemonData().subscribe({next:e=>{this.aPokemonData=e},error:e=>{console.log(e)}}),this.serviceAbilities.getAbilities().subscribe({next:e=>{this.aAbilities=e},error:e=>{console.log(e)}}),this.serviceMoves.getMoves().subscribe({next:e=>{this.aMoves=e},error:e=>{console.log(e)}})}savePokemon(){let e=this.frm.get("pokemonId")?.value,i=this.frm.get("abilities")?.value,a=this.frm.get("moves")?.value,d=i.map(c=>({pokemonId:e,abilityId:c})),A=a.map(c=>({pokemonId:e,moveId:c}));console.log(d),console.log(A),this.servicePokemonData.addAbilitiesToPokemon(d).subscribe({next:c=>{this.servicePokemonData.addMovesToPokemon(A).subscribe({next:g=>{Q.default.fire("The moves and abilities have been added to the pokemon","","success"),this.frm.reset(),this.router.navigateByUrl("/adminPanel")},error:g=>{console.log(g)}})},error:c=>{console.log(c)}})}selectExistingMovesAbilities(e){this.serviceAbilities.getPokemonAbilities(e).subscribe({next:i=>{let a=i.map(d=>d.id);this.frm.get("abilities")?.setValue(a)},error:i=>{console.log(i)}}),this.serviceMoves.getPokemonMoves(e).subscribe({next:i=>{let a=i.map(d=>d.id);this.frm.get("moves")?.setValue(a)},error:i=>{console.log(i)}})}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=h({type:s,selectors:[["app-add-abilities-moves-pokemon"]],decls:32,vars:17,consts:[["autocomplete","off",3,"submit","formGroup"],[1,"row"],[1,"col-12","text-center","mt-3","d-flex","justify-content-between"],["type","submit",1,"btn","btn-success",3,"disabled"],["formControlName","pokemonId"],[3,"value"],["formControlName","abilities","multiple",""],["formControlName","moves","multiple",""]],template:function(i,a){i&1&&(o(0,"form",0),I("submit",function(){return a.savePokemon()}),o(1,"div",1)(2,"div",2)(3,"h2"),l(4),r(5,"translate"),n(),o(6,"button",3),l(7),r(8,"translate"),n()()(),P(9,"hr"),o(10,"div",1)(11,"mat-form-field")(12,"mat-label"),l(13),r(14,"translate"),n(),o(15,"mat-select",4),f(16,Y,4,6,"mat-option",5,u),n()(),o(18,"mat-form-field")(19,"mat-label"),l(20),r(21,"translate"),n(),o(22,"mat-select",6),f(23,Z,4,6,"mat-option",5,u),n()(),o(25,"mat-form-field")(26,"mat-label"),l(27),r(28,"translate"),n(),o(29,"mat-select",7),f(30,ee,4,6,"mat-option",5,u),n()()()()),i&2&&(b("formGroup",a.frm),t(4),p(m(5,7,"pokemonAdd.title")),t(2),b("disabled",a.frm.invalid),t(),p(m(8,9,"button.save")),t(6),p(m(14,11,"pokemonAdd.pokemon")),t(3),k(a.aPokemonData),t(4),p(m(21,13,"pokemonAdd.abilities")),t(3),k(a.aAbilities),t(4),p(m(28,15,"pokemonAdd.moves")),t(3),k(a.aMoves))},dependencies:[C,x,$,B,F,_,T,E,G,D,S,q,V,w,j,H,z,U,J],encapsulation:2})};export{K as AddAbilitiesMovesPokemonComponent};
